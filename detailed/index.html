
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://datashades.github.io/ckanext-collection/detailed/">
      
      
        <link rel="prev" href="..">
      
      
      
      <link rel="icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.27">
    
    
      
        <title>Deep dive - ckanext-collection</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#deep-dive" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="ckanext-collection" class="md-header__button md-logo" aria-label="ckanext-collection" data-md-component="logo">
      
  <img src="../img/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ckanext-collection
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Deep dive
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/DataShades/ckanext-collection" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="ckanext-collection" class="md-nav__button md-logo" aria-label="ckanext-collection" data-md-component="logo">
      
  <img src="../img/logo.png" alt="logo">

    </a>
    ckanext-collection
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/DataShades/ckanext-collection" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Deep dive
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Deep dive
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#content" class="md-nav__link">
    <span class="md-ellipsis">
      Content
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Requirements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">
      Usage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentation" class="md-nav__link">
    <span class="md-ellipsis">
      Documentation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#collection-intialization" class="md-nav__link">
    <span class="md-ellipsis">
      Collection intialization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#services" class="md-nav__link">
    <span class="md-ellipsis">
      Services
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Services">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-logic" class="md-nav__link">
    <span class="md-ellipsis">
      Common logic
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-service" class="md-nav__link">
    <span class="md-ellipsis">
      Data service
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pager-service" class="md-nav__link">
    <span class="md-ellipsis">
      Pager service
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serializer-service" class="md-nav__link">
    <span class="md-ellipsis">
      Serializer service
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#columns-service" class="md-nav__link">
    <span class="md-ellipsis">
      Columns service
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filters-service" class="md-nav__link">
    <span class="md-ellipsis">
      Filters service
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#core-classes-and-usage-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Core classes and usage examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core classes and usage examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#data" class="md-nav__link">
    <span class="md-ellipsis">
      Data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#staticdata" class="md-nav__link">
    <span class="md-ellipsis">
      StaticData
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basesadata" class="md-nav__link">
    <span class="md-ellipsis">
      BaseSaData
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#statementsadata" class="md-nav__link">
    <span class="md-ellipsis">
      StatementSaData
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unionsadata" class="md-nav__link">
    <span class="md-ellipsis">
      UnionSaData
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modeldata" class="md-nav__link">
    <span class="md-ellipsis">
      ModelData
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apidata" class="md-nav__link">
    <span class="md-ellipsis">
      ApiData
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apisearchdata" class="md-nav__link">
    <span class="md-ellipsis">
      ApiSearchData
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apilistdata" class="md-nav__link">
    <span class="md-ellipsis">
      ApiListData
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pager" class="md-nav__link">
    <span class="md-ellipsis">
      Pager
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#classicpager" class="md-nav__link">
    <span class="md-ellipsis">
      ClassicPager
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#columns" class="md-nav__link">
    <span class="md-ellipsis">
      Columns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filters" class="md-nav__link">
    <span class="md-ellipsis">
      Filters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serializer" class="md-nav__link">
    <span class="md-ellipsis">
      Serializer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#csvserializer" class="md-nav__link">
    <span class="md-ellipsis">
      CsvSerializer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jsonlserializer" class="md-nav__link">
    <span class="md-ellipsis">
      JsonlSerializer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jsonserializer" class="md-nav__link">
    <span class="md-ellipsis">
      JsonSerializer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#htmlserializer" class="md-nav__link">
    <span class="md-ellipsis">
      HtmlSerializer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tableserializer" class="md-nav__link">
    <span class="md-ellipsis">
      TableSerializer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#htmxtableserializer" class="md-nav__link">
    <span class="md-ellipsis">
      HtmxTableSerializer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#config-settings" class="md-nav__link">
    <span class="md-ellipsis">
      Config settings
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integrations" class="md-nav__link">
    <span class="md-ellipsis">
      Integrations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Integrations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ckanext-admin-panel" class="md-nav__link">
    <span class="md-ellipsis">
      ckanext-admin-panel
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#license" class="md-nav__link">
    <span class="md-ellipsis">
      License
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#content" class="md-nav__link">
    <span class="md-ellipsis">
      Content
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Requirements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">
      Usage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentation" class="md-nav__link">
    <span class="md-ellipsis">
      Documentation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#collection-intialization" class="md-nav__link">
    <span class="md-ellipsis">
      Collection intialization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#services" class="md-nav__link">
    <span class="md-ellipsis">
      Services
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Services">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-logic" class="md-nav__link">
    <span class="md-ellipsis">
      Common logic
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-service" class="md-nav__link">
    <span class="md-ellipsis">
      Data service
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pager-service" class="md-nav__link">
    <span class="md-ellipsis">
      Pager service
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serializer-service" class="md-nav__link">
    <span class="md-ellipsis">
      Serializer service
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#columns-service" class="md-nav__link">
    <span class="md-ellipsis">
      Columns service
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filters-service" class="md-nav__link">
    <span class="md-ellipsis">
      Filters service
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#core-classes-and-usage-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Core classes and usage examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core classes and usage examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#data" class="md-nav__link">
    <span class="md-ellipsis">
      Data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#staticdata" class="md-nav__link">
    <span class="md-ellipsis">
      StaticData
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basesadata" class="md-nav__link">
    <span class="md-ellipsis">
      BaseSaData
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#statementsadata" class="md-nav__link">
    <span class="md-ellipsis">
      StatementSaData
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unionsadata" class="md-nav__link">
    <span class="md-ellipsis">
      UnionSaData
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modeldata" class="md-nav__link">
    <span class="md-ellipsis">
      ModelData
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apidata" class="md-nav__link">
    <span class="md-ellipsis">
      ApiData
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apisearchdata" class="md-nav__link">
    <span class="md-ellipsis">
      ApiSearchData
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apilistdata" class="md-nav__link">
    <span class="md-ellipsis">
      ApiListData
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pager" class="md-nav__link">
    <span class="md-ellipsis">
      Pager
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#classicpager" class="md-nav__link">
    <span class="md-ellipsis">
      ClassicPager
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#columns" class="md-nav__link">
    <span class="md-ellipsis">
      Columns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filters" class="md-nav__link">
    <span class="md-ellipsis">
      Filters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serializer" class="md-nav__link">
    <span class="md-ellipsis">
      Serializer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#csvserializer" class="md-nav__link">
    <span class="md-ellipsis">
      CsvSerializer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jsonlserializer" class="md-nav__link">
    <span class="md-ellipsis">
      JsonlSerializer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jsonserializer" class="md-nav__link">
    <span class="md-ellipsis">
      JsonSerializer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#htmlserializer" class="md-nav__link">
    <span class="md-ellipsis">
      HtmlSerializer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tableserializer" class="md-nav__link">
    <span class="md-ellipsis">
      TableSerializer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#htmxtableserializer" class="md-nav__link">
    <span class="md-ellipsis">
      HtmxTableSerializer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#config-settings" class="md-nav__link">
    <span class="md-ellipsis">
      Config settings
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integrations" class="md-nav__link">
    <span class="md-ellipsis">
      Integrations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Integrations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ckanext-admin-panel" class="md-nav__link">
    <span class="md-ellipsis">
      ckanext-admin-panel
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#license" class="md-nav__link">
    <span class="md-ellipsis">
      License
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="deep-dive">Deep dive</h1>
<h2 id="content">Content</h2>
<ul>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#documentation">Documentation</a></li>
<li><a href="#overview">Overview</a></li>
<li><a href="#collection-intialization">Collection intialization</a></li>
<li><a href="#services">Services</a><ul>
<li><a href="#common-logic">Common logic</a></li>
<li><a href="#data-service">Data service</a></li>
<li><a href="#pager-service">Pager service</a></li>
<li><a href="#serializer-service">Serializer service</a></li>
<li><a href="#columns-service">Columns service</a></li>
<li><a href="#filters-service">Filters service</a></li>
</ul>
</li>
<li><a href="#core-classes-and-usage-examples">Core classes and usage examples</a><ul>
<li><a href="#collection">Collection</a></li>
<li><a href="#dbcollection">DbCollection</a></li>
<li><a href="#data">Data</a></li>
<li><a href="#staticdata">StaticData</a></li>
<li><a href="#basesadata">BaseSaData</a></li>
<li><a href="#statementsadata">StatementSaData</a></li>
<li><a href="#unionsadata">UnionSaData</a></li>
<li><a href="#modeldata">ModelData</a></li>
<li><a href="#tabledata">TableData</a></li>
<li><a href="#apidata">ApiData</a></li>
<li><a href="#apisearchdata">ApiSearchData</a></li>
<li><a href="#apilistdata">ApiListData</a></li>
<li><a href="#pager">Pager</a></li>
<li><a href="#classicpager">ClassicPager</a></li>
<li><a href="#columns">Columns</a></li>
<li><a href="#tablecolumns">TableColumns</a></li>
<li><a href="#filters">Filters</a></li>
<li><a href="#serializer">Serializer</a></li>
<li><a href="#csvserializer">CsvSerializer</a></li>
<li><a href="#jsonlserializer">JsonlSerializer</a></li>
<li><a href="#jsonserializer">JsonSerializer</a></li>
<li><a href="#htmlserializer">HtmlSerializer</a></li>
<li><a href="#tableserializer">TableSerializer</a></li>
<li><a href="#htmxtableserializer">HtmxTableSerializer</a></li>
</ul>
</li>
<li><a href="#config-settings">Config settings</a></li>
<li><a href="#integrations">Integrations</a></li>
<li><a href="#ckanext-admin-panel">ckanext-admin-panel</a></li>
<li><a href="#license">License</a></li>
</ul>
<h2 id="requirements">Requirements</h2>
<p>Compatibility with core CKAN versions:</p>
<table>
<thead>
<tr>
<th>CKAN version</th>
<th>Compatible?</th>
</tr>
</thead>
<tbody>
<tr>
<td>2.9</td>
<td>no</td>
</tr>
<tr>
<td>2.10</td>
<td>yes</td>
</tr>
<tr>
<td>master</td>
<td>yes</td>
</tr>
</tbody>
</table>
<h2 id="installation">Installation</h2>
<p>To install ckanext-collection:</p>
<ol>
<li>
<p>Install the extension:
   <div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>ckanext-collection
</code></pre></div></p>
</li>
<li>
<p>Add <code>collection</code> to the <code>ckan.plugins</code> setting in your CKAN
   config file .</p>
</li>
</ol>
<h2 id="usage">Usage</h2>
<p>Collections can be registered via <code>ckanext.collection.interfaces.ICollection</code>
or via CKAN signals. Registered collection can be initialized anywhere in code
using helper and can be used in a number of generic endpoints that render
collection as HTML of export it into different formats.</p>
<p>Registration via interface:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">ckanext.collection.interfaces</span> <span class="kn">import</span> <span class="n">CollectionFactory</span><span class="p">,</span> <span class="n">ICollection</span>


<span class="k">class</span> <span class="nc">MyPlugin</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">SingletonPlugin</span><span class="p">):</span>
    <span class="n">p</span><span class="o">.</span><span class="n">implements</span><span class="p">(</span><span class="n">ICollection</span><span class="p">,</span> <span class="n">inherit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_collection_factories</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">CollectionFactory</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;my-collection&quot;</span><span class="p">:</span> <span class="n">MyCollection</span><span class="p">,</span>
        <span class="p">}</span>
</code></pre></div>
<p><code>get_collection_factories</code> returns a dictionary with collection names(letters,
digits, underscores and hyphens are allowed) as keys, and collection factories
as values. In most generic case, collection factory is just a collection
class. But you can use any function with signature <code>(str, dict[str, Any],
**Any) -&gt; Collection</code> as a factory. For example, the following function is a
valid collection factory and it can be returned from <code>get_collection_factories</code></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">my_factory</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Collection that shows 100 numbers per page&quot;&quot;&quot;</span>
    <span class="n">params</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;rows_per_page&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">MyCollection</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
<p>If you want to register a collection only if collection plugin is enabled, you
can use CKAN signals instead of wrapping import from ckanext-collection into
try except block:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">MyPlugin</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">SingletonPlugin</span><span class="p">):</span>
    <span class="n">p</span><span class="o">.</span><span class="n">implements</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">ISignal</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_signal_subscriptions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">types</span><span class="o">.</span><span class="n">SignalMapping</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">tk</span><span class="o">.</span><span class="n">signals</span><span class="o">.</span><span class="n">ckanext</span><span class="o">.</span><span class="n">signal</span><span class="p">(</span><span class="s2">&quot;collection:register_collections&quot;</span><span class="p">):</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">collect_collection_factories</span><span class="p">,</span>
            <span class="p">],</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">collect_collection_factories</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sender</span><span class="p">:</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;my-collection&quot;</span><span class="p">:</span> <span class="n">MyCollection</span><span class="p">,</span>
        <span class="p">}</span>
</code></pre></div>
<p>Data returned from the signal subscription is exactly the same as from
<code>ICollection.get_collection_factories</code>. The only difference, signal
subscription accepts <code>sender</code> argument which is always <code>None</code>, due to internal
implementation of signals.</p>
<h2 id="documentation">Documentation</h2>
<h3 id="overview">Overview</h3>
<p>The goal of this plugin is to supply you with generic classes for processing
collections of data. As result, it doesn't do much out of the box and you have
to write some code to see a result.</p>
<p>Majority of useful classes are available inside <code>ckanext.collection.utils</code>
module and all examples bellow require the following line in the beginning of
the script: <code>from ckanext.collection.utils import *</code>.</p>
<p>Let's start with the basics. <code>ckanext-collection</code> defines a few collections for
different puproses. The most basic collection is <code>Collection</code>, but it has no
value without customization, so we'll start from <code>StaticCollection</code>:</p>
<div class="highlight"><pre><span></span><code><span class="n">col</span> <span class="o">=</span> <span class="n">StaticCollection</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="p">{})</span>
</code></pre></div>
<p>Constructor of any collection has two mandatory arguments: name and
parameters. Name is mostly used internally and consists of any combination of
letters, digits, hyphens and underscores. Parameters are passed inside the
dictionary and they change the content of the collection.</p>
<p>In the most basic scenario, collection represents a number of similar items:
datasets, users, organizations, dictionaries, numbers, etc. As result, it can
be transformed into list or iterated over:</p>
<div class="highlight"><pre><span></span><code><span class="nb">list</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>

<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">col</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</code></pre></div>
<p>Our test collection is empty at the moment, so you will not see anything just
yet. Usually, <code>StaticCollection</code> contains static data, specified when
collection is created. But because we haven't specified any data, collection
contains nothing.</p>
<p>To fix this problem, we have to configure a part of the collection responsible
for data production using its <strong>settings</strong>. Collection divides its internal
logic between a number of configurable <em>services</em>, and service that we need is
called <strong>data</strong> service. To modify it, we can pass a named argument called
<code>data_settings</code> to the collection's constructor:</p>
<div class="highlight"><pre><span></span><code><span class="n">col</span> <span class="o">=</span> <span class="n">StaticCollection</span><span class="p">(</span>
    <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="p">{},</span>
    <span class="n">data_settings</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]}</span>
<span class="p">)</span>
</code></pre></div>
<p>Now try again iterating over the collection and now you'll see the result:</p>
<div class="highlight"><pre><span></span><code><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">col</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</code></pre></div>
<p>It's not very impressive, but you didn't expect much from <strong>static</strong>
collection, right? There are other collections that are more smart, but we have
to learn more concepts of this extension to use them, so for now we'll only
take a brief look on them.</p>
<p><strong>Note</strong>: collections have certain restrictions when it comes to amount of
data. By default, you'll see only around 10 records, even if you have more. The
same is true for <code>StaticCollection</code> - you can see it if you set <code>data</code>
attribute of its data-service to <code>range(1, 100)</code>. We'll learn how to control
these restrictions later.</p>
<p><code>StaticCollection</code> works with static data. It can be used for tests or as a
placeholder for a collection that is not yet implemented. In rare cases it can
be used with arbitrary iterable to create a standard interface for data
interaction.</p>
<p><code>ModelCollection</code> works with SQLAlchemy models. We are going to use two
attributes of its data-service: <code>model</code> and <code>is_scalar</code>. The former sets actual
model that collection processes, while the latter controls, how we work with
every individual record. By default, <code>ModelCollection</code> returns every record as
a number of columns, but we'll set <code>is_scalar=True</code> and receive model instance
for every record instead:</p>
<div class="highlight"><pre><span></span><code><span class="n">col</span> <span class="o">=</span> <span class="n">ModelCollection</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="p">{},</span>
    <span class="n">data_settings</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;is_scalar&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="n">model</span><span class="o">.</span><span class="n">User</span><span class="p">}</span>
<span class="p">)</span>

<span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">col</span><span class="p">:</span>
  <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">User</span><span class="p">)</span>
  <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<p><code>ApiSearchCollection</code> works with API actions similar to <code>package_search</code>. They
have to use <code>rows</code> and <code>start</code> parameters for pagination and their result must
contain <code>count</code> and <code>results</code> keys. Its data-service accepts <code>action</code> attribute
with the name of API action that produces the data:</p>
<div class="highlight"><pre><span></span><code><span class="n">col</span> <span class="o">=</span> <span class="n">ApiSearchCollection</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="p">{},</span>
    <span class="n">data_settings</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;package_search&quot;</span><span class="p">}</span>
<span class="p">)</span>

<span class="k">for</span> <span class="n">pkg</span> <span class="ow">in</span> <span class="n">col</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">pkg</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">pkg</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<p><code>ApiListCollection</code> works with API actions similar to <code>package_list</code>. They have
to use <code>limit</code> and <code>offset</code> parameters for pagination and their result must be
represented by a list.</p>
<div class="highlight"><pre><span></span><code><span class="n">col</span> <span class="o">=</span> <span class="n">ApiListCollection</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="p">{},</span>
    <span class="n">data_settings</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;package_list&quot;</span><span class="p">}</span>
<span class="p">)</span>

<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">col</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</code></pre></div>
<p><code>ApiCollection</code> works with API actions similar to <code>user_list</code>. They have to
return all records at once, as list.</p>
<div class="highlight"><pre><span></span><code><span class="n">col</span> <span class="o">=</span> <span class="n">ApiCollection</span><span class="p">(</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="p">{},</span>
    <span class="n">data_settings</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;user_list&quot;</span><span class="p">}</span>
<span class="p">)</span>

<span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">col</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">user</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>
</code></pre></div>
<h3 id="collection-intialization">Collection intialization</h3>
<p>Collection constructor has two mandatory arguments: name and parameters.</p>
<p>Name is used as collection identifier and it's better to keep this value unique
accross collections. For example, name is used for computing HTML table <code>id</code>
attribute when serializing collection as an HTML table. If you render two
collections with the same name, you'll get two identical IDs on the page.</p>
<p>Params are usually used by data and pager service for searching, sorting,
etc. Collection does not keep all the params. Instead, it stores only items
with key prefixed by <code>&lt;name&gt;:</code>. I.e, if collection has name <code>hello</code>, and you
pass <code>{"hello:a": 1, "b": 2, "world:c": 3}</code>, collection will remove <code>b</code>(because
it has no collection name plus colon prefix) and <code>world:c</code> members(because it
uses <code>world</code> instead of <code>hello</code> in prefix). As for <code>hello:a</code>, collection strips
<code>&lt;name&gt;:</code> prefix from it. So, in the end, collection stores <code>{"a": 1}</code>.  You
can check params of the collection using <code>params</code> attribute:</p>
<div class="highlight"><pre><span></span><code><span class="n">col</span> <span class="o">=</span> <span class="n">Collection</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;hello:a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;world:c&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
<span class="k">assert</span> <span class="n">col</span><span class="o">.</span><span class="n">params</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>

<span class="n">col</span> <span class="o">=</span> <span class="n">Collection</span><span class="p">(</span><span class="s2">&quot;world&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;hello:a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;world:c&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
<span class="k">assert</span> <span class="n">col</span><span class="o">.</span><span class="n">params</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
</code></pre></div>
<p>It allows you rendering and processing multiple collections simultaneously on
the same page. Imagine that you have collection <code>users</code> and collection
<code>packages</code>. You want to see second page of <code>users</code> and fifth of
<code>packages</code>. Submit the query string <code>?users:page=2&amp;packages:page=5</code> and
initialize collections using the following code:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">ckan.logic</span> <span class="kn">import</span> <span class="n">parse_params</span>
<span class="kn">from</span> <span class="nn">ckan.plugins</span> <span class="kn">import</span> <span class="n">toolkit</span> <span class="k">as</span> <span class="n">tk</span>

<span class="n">params</span> <span class="o">=</span> <span class="n">parse_params</span><span class="p">(</span><span class="n">tk</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>

<span class="n">users</span> <span class="o">=</span> <span class="n">ModelCollection</span><span class="p">(</span>
    <span class="s2">&quot;users&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span>
    <span class="n">data_settings</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="n">model</span><span class="o">.</span><span class="n">User</span><span class="p">}</span>
<span class="p">)</span>
<span class="n">packages</span> <span class="o">=</span> <span class="n">ModelCollection</span><span class="p">(</span>
    <span class="s2">&quot;packages&quot;</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span>
    <span class="n">data_settings</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="n">model</span><span class="o">.</span><span class="n">Package</span><span class="p">}</span>
<span class="p">)</span>

<span class="k">assert</span> <span class="n">users</span><span class="o">.</span><span class="n">pager</span><span class="o">.</span><span class="n">page</span> <span class="o">==</span> <span class="mi">2</span>
<span class="k">assert</span> <span class="n">packages</span><span class="o">.</span><span class="n">pager</span><span class="o">.</span><span class="n">page</span> <span class="o">==</span> <span class="mi">5</span>
</code></pre></div>
<h3 id="services">Services</h3>
<p>Collection itself contains just a bare minimum of logic, and all the
heavy-lifting is delegated to <em>services</em>. Collection knows how to initialize
services and usually the only difference between all your collections, is the
way all their services are configured.</p>
<p>Collection contains the following services:
* <code>data</code>: controls the exact data that can be received from
  collection. Contains logic for searching, filters, sorting, etc.
* <code>pager</code>: defines restrictions for data iteration. Exactly this service shows
  only 10 records when you iterating over static collection
* <code>serializer</code>: specifies how collection can be transformed into desired
  form. Using correct serializer you'll be able to dump the whole collection as
  CSV, JSON, YAML or render it as HTML table.
* <code>columns</code>: contains configuration of specific data columns used by other
  services. It may define model attributes that are dumped into CSV, names of
  the transformation functions that are applied to the certain attribute, names
  of the columns that are available for sorting in HTML representation of data.
* <code>filters</code>: contains configuration of additional widgets produced during data
  serialization. For example, when data is serialized into an HTML table,
  filters can define configuration of dropdowns and input fields from the data
  search form.</p>
<p><strong>Note</strong>: You can define more services in custom collections. The list above
enumerates all the services that are available in the base collection and in
all collections shipped with the current extension. For example, one of
built-in collections, <code>DbCollection</code> has additional service called
<code>db_connection</code> that can communicate with DB.</p>
<p>When a collection is created, it creates an instance of each service using
service factories and service settings. Base collection and all collections
that extend it already have all details for initializing every service:</p>
<div class="highlight"><pre><span></span><code><span class="n">col</span> <span class="o">=</span> <span class="n">Collection</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="p">{})</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;Services:</span>
<span class="s2">  </span><span class="si">{</span><span class="n">col</span><span class="o">.</span><span class="n">data</span><span class="si">=}</span><span class="s2">,</span>
<span class="s2">  </span><span class="si">{</span><span class="n">col</span><span class="o">.</span><span class="n">pager</span><span class="si">=}</span><span class="s2">,</span>
<span class="s2">  </span><span class="si">{</span><span class="n">col</span><span class="o">.</span><span class="n">serializer</span><span class="si">=}</span><span class="s2">,</span>
<span class="s2">  </span><span class="si">{</span><span class="n">col</span><span class="o">.</span><span class="n">columns</span><span class="si">=}</span><span class="s2">,</span>
<span class="s2">  </span><span class="si">{</span><span class="n">col</span><span class="o">.</span><span class="n">filters</span><span class="si">=}</span><span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>

<span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="o">==</span> <span class="p">[]</span>
</code></pre></div>
<p>This collection has no data. We can initialize an instance of <code>StaticData</code> and
replace the existing data service of the collection with new <code>StaticData</code>
instance.</p>
<p>Every service has one required argument: collection that owns the service. All
other arguments are used as a service settings and must be passed by
name. Remember, all the classes used in this manual are available inside
<code>ckanext.collection.utils</code>:</p>
<div class="highlight"><pre><span></span><code><span class="n">static_data</span> <span class="o">=</span> <span class="n">StaticData</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="n">col</span><span class="o">.</span><span class="n">replace_service</span><span class="p">(</span><span class="n">static_data</span><span class="p">)</span>

<span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</code></pre></div>
<p>Look at <code>Colletion.replace_service</code>. It accepts only service instance. There is
no need to pass the name of the service that must be replaced - collection can
understand it without help. And pay attention to the first argument of service
constructor. It must be the collection that is going to use the service. Some
services may work even if you pass a random value as the first argument, but
it's an exceptional situation and one shouldn't rely on it.</p>
<p>If existing collection is no longer used and you are going to create a new one,
you sometimes want to reuse a service from an existing collection. Just to
avoid creating the service and calling <code>Collection.replace_service</code>, which will
save you two lines of code. In this case, use <code>&lt;service&gt;_instance</code> parameter of
the collection constructor:</p>
<div class="highlight"><pre><span></span><code><span class="n">another_col</span> <span class="o">=</span> <span class="n">Collection</span><span class="p">(</span><span class="s2">&quot;another-name&quot;</span><span class="p">,</span> <span class="p">{},</span> <span class="n">data_instance</span><span class="o">=</span><span class="n">col</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">another_col</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</code></pre></div>
<p>If you do such thing, make sure you are not using old collection anymore. You
just transfered one of its services to another collection, so there is no
guarantees that old collection with detached service will function properly.</p>
<p>It's usually better to customize service factory, instead of passing existing
customized instance of the service around. You can tell which class to use for
making an instance of a service using <code>&lt;service&gt;_factory</code> parameter of the
collection contstructor:</p>
<div class="highlight"><pre><span></span><code><span class="n">col</span> <span class="o">=</span> <span class="n">Collection</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="p">{},</span> <span class="n">data_factory</span><span class="o">=</span><span class="n">StaticData</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="o">==</span> <span class="p">[]</span>
</code></pre></div>
<p>But in this way we cannot specify the <code>data</code> attribute of the <code>data</code> factory!
No worries, there are multiple ways to overcome this problem. First of all, all
the settings of the service are available as its attributes. It means that
<code>data</code> setting is the same as <code>data</code> attribute of the service. If you can do
<code>StaticData(..., data=...)</code>, you can as well do <code>service = StaticData(...);
service.data = ...</code>:</p>
<div class="highlight"><pre><span></span><code><span class="n">col</span> <span class="o">=</span> <span class="n">Collection</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="p">{},</span> <span class="n">data_factory</span><span class="o">=</span><span class="n">StaticData</span><span class="p">)</span>
<span class="n">col</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</code></pre></div>
<p><strong>Note</strong>: <code>data</code> service caches its data. If you already accessed data property
from the <code>StaticData</code>, assigning an new value doesn't have any effect because
of the cache. You have to call <code>col.data.refresh_data()</code> after assigning to
rebuild the cache.</p>
<p>But there is a better way. You can pass <code>&lt;service&gt;_settings</code> dictionary to the
collection constructor and it will be passed down into corresponding service
factory:</p>
<div class="highlight"><pre><span></span><code><span class="n">col</span> <span class="o">=</span> <span class="n">Collection</span><span class="p">(</span>
    <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="p">{},</span>
    <span class="n">data_factory</span><span class="o">=</span><span class="n">StaticData</span><span class="p">,</span>
    <span class="n">data_settings</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}</span>
<span class="p">)</span>
<span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</code></pre></div>
<p>It works well for individual scenarios, but when you are creating a lot of
collections with the static data, you want to omit some standard parameters. In
this case you should define a new class that extends Collection and declares
<code>&lt;Service&gt;Factory</code> attribute:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">MyCollection</span><span class="p">(</span><span class="n">Collection</span><span class="p">):</span>
    <span class="n">DataFactory</span> <span class="o">=</span> <span class="n">StaticData</span>

<span class="n">col</span> <span class="o">=</span> <span class="n">MyCollection</span><span class="p">(</span>
    <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="p">{},</span>
    <span class="n">data_settings</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}</span>
<span class="p">)</span>
<span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</code></pre></div>
<p>You still can pass <code>data_factory</code> into <code>MyCollection</code> constructor to override
data service factory. But now, by default, <code>StaticData</code> is used when it's not
specified explicitly.</p>
<p>Finally, if you want to create a subclass of service, that has a specific value
of certain attributes, i.e something like this:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">OneTwoThreeData</span><span class="p">(</span><span class="n">StaticData</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</code></pre></div>
<p>you can use <code>Service.with_attributes(attr_name=attr_value)</code> factory method. It
produce a new service class(factory) with specified attributes bound to a
static value. For example, that's how we can define a collection, that always
contains <code>[1, 2, 3]</code>:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">MyCollection</span><span class="p">(</span><span class="n">Collection</span><span class="p">):</span>
    <span class="n">DataFactory</span> <span class="o">=</span> <span class="n">StaticData</span><span class="o">.</span><span class="n">with_attributes</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="n">col</span> <span class="o">=</span> <span class="n">MyCollection</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="p">{})</span>
<span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</code></pre></div>
<p>Now you don't have to specify <code>data_factory</code> or <code>data_settings</code> when creating a
collection. It will always use <code>StaticData</code> with <code>data</code> set to <code>[1, 2, 3]</code>
. Make sure you mean it, because now you cannot override the data using
<code>data_settings</code>.</p>
<h4 id="common-logic">Common logic</h4>
<p>All services share a few common features. First of all, all services contain a
reference to the collection that uses/owns the service. Only one collection can
own the service. If you move service from one collection to another, you must
never use the old collection, that no longer owns the service. Depending on
internal implementation of the service, it may work without changes, but we
recommend removing such collections. At any point you can get the collection
that owns the service via <code>attached</code> attribute of the service:</p>
<div class="highlight"><pre><span></span><code><span class="n">col</span> <span class="o">=</span> <span class="n">Collection</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="p">{})</span>
<span class="k">assert</span> <span class="n">col</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">attached</span> <span class="ow">is</span> <span class="n">col</span>
<span class="k">assert</span> <span class="n">col</span><span class="o">.</span><span class="n">pager</span><span class="o">.</span><span class="n">attached</span> <span class="ow">is</span> <span class="n">col</span>
<span class="k">assert</span> <span class="n">col</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">attached</span> <span class="ow">is</span> <span class="n">col</span>

<span class="n">another_col</span> <span class="o">=</span> <span class="n">Collection</span><span class="p">(</span>
    <span class="s2">&quot;another-name&quot;</span><span class="p">,</span> <span class="p">{},</span>
    <span class="n">data_instance</span><span class="o">=</span><span class="n">col</span><span class="o">.</span><span class="n">data</span>
<span class="p">)</span>
<span class="k">assert</span> <span class="n">col</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">attached</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">col</span>
<span class="k">assert</span> <span class="n">col</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">attached</span> <span class="ow">is</span> <span class="n">another_col</span>
<span class="k">assert</span> <span class="n">col</span><span class="o">.</span><span class="n">data</span> <span class="ow">is</span> <span class="n">another_col</span><span class="o">.</span><span class="n">data</span>
</code></pre></div>
<p>Second common point of services is <strong>settings</strong>. Let's use <code>StaticData</code> for
tests. It has one configurable attribute(setting) - <code>data</code>. We can specify it
directly when creating data service instance: <code>StaticData(..., data=DATA)</code>. Or
we can specify it via <code>data_settings</code> when creating a collection:
<code>StaticCollection("name", {}, data_settings={"data": DATA})</code>. In both cases
<code>DATA</code> will be available as a <code>data</code> attribute of the data service. But it
doesn't mean that we can pass just any attribute in this way:</p>
<div class="highlight"><pre><span></span><code><span class="n">data</span> <span class="o">=</span> <span class="n">StaticData</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">[],</span> <span class="n">not_real</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;not_real&quot;</span><span class="p">)</span>
</code></pre></div>
<p>To allow overriding the value of attribute via settings, we have to define this
attribute as a <strong>configurable attribute</strong>. For this we need
<code>configurable_attribute</code> function from <code>ckanext.collection.shared</code>:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">MyData</span><span class="p">(</span><span class="n">StaticData</span><span class="p">):</span>
    <span class="n">i_am_real</span> <span class="o">=</span> <span class="n">configurable_attribute</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">MyData</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">[],</span> <span class="n">i_am_real</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;i_am_real&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">data</span><span class="o">.</span><span class="n">i_am_real</span> <span class="ow">is</span> <span class="kc">True</span>
</code></pre></div>
<p><code>configurable_attribute</code> accepts either positional default value of the
attribute, or named <code>default_factory</code> function that generated default value
every time new instance of the service is created. <code>default_factory</code> must
accept a single argument - a new service that is instantiated at the moment:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">MyData</span><span class="p">(</span><span class="n">StaticData</span><span class="p">):</span>
    <span class="n">ref</span> <span class="o">=</span> <span class="mi">42</span>
    <span class="n">i_am_real</span> <span class="o">=</span> <span class="n">shared</span><span class="o">.</span><span class="n">configurable_attribute</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span> <span class="bp">self</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">ref</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">MyData</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">[])</span>
<span class="k">assert</span> <span class="n">data</span><span class="o">.</span><span class="n">i_am_real</span> <span class="o">==</span> <span class="mi">420</span>
</code></pre></div>
<p>Never use another configurable attributes in the <code>default_factory</code> - order in
which configurable attributes are initialized is not strictly defined. At the
moment of writing this manual, configurable attributes were initialized in
alphabetical order, but this implementation detail may change in future without
notice.</p>
<p>TODO: with_attributes</p>
<h4 id="data-service">Data service</h4>
<p>This service produces the data for collection. Every data service must:</p>
<ul>
<li>be Iterable and iterate over all available records by default</li>
<li>define <code>total</code> property, that reflects number of available records so that
  <code>len(list(data)) == data.total</code></li>
<li>define <code>range(start: Any, end: Any)</code> method that returns slice of the data</li>
</ul>
<p>Base class for data services - <code>Data</code> - already contains a simple version of
this logic. You need to define only one method to make you custom
implementations: <code>compute_data()</code>. When data if accessed for the first time,
<code>compute_data</code> is called. Its result cached and used for iteration in
for-loops, slicing via <code>range</code> method and size measurement via <code>total</code>
property.</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">CustomData</span><span class="p">(</span><span class="n">Data</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">compute_data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span>

<span class="n">col</span> <span class="o">=</span> <span class="n">Collection</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="p">{},</span> <span class="n">data_factory</span><span class="o">=</span><span class="n">CustomData</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">,</span> <span class="s2">&quot;g&quot;</span><span class="p">,</span> <span class="s2">&quot;h&quot;</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="s2">&quot;j&quot;</span><span class="p">]</span>
<span class="k">assert</span> <span class="n">col</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">total</span> <span class="o">==</span> <span class="mi">26</span>
<span class="k">assert</span> <span class="n">col</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;xyz&quot;</span>
</code></pre></div>
<p>If you need more complex data source, make sure you defined <code>__iter__</code>,
<code>total</code>, and <code>range</code>:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">CustomData</span><span class="p">(</span><span class="n">Data</span><span class="p">):</span>
    <span class="n">names</span> <span class="o">=</span> <span class="n">configurable_attribute</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Anna&quot;</span><span class="p">,</span> <span class="s2">&quot;Henry&quot;</span><span class="p">,</span> <span class="s2">&quot;Mary&quot;</span><span class="p">])</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">total</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">yield from</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">end</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">end</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">name</span> <span class="o">&lt;</span> <span class="n">start</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">name</span> <span class="o">&gt;</span> <span class="n">end</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="k">yield</span> <span class="n">name</span>
</code></pre></div>
<h4 id="pager-service">Pager service</h4>
<p>Pager service sets the upper and lower bounds on data used by
collection. Default pager used by collection relies on numeric <code>start</code>/<code>end</code>
values. But it's possible to define custom pager that uses alphabetical or
temporal bounds, as long as <code>range</code> method of your custom data service supports
these bounds.</p>
<p>Standard pager(<code>ClassicPager</code>) has two configurable attributes: <code>page</code>(default:
1) and <code>rows_per_page</code>(default: 10).</p>
<div class="highlight"><pre><span></span><code><span class="n">col</span> <span class="o">=</span> <span class="n">StaticCollection</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="p">{})</span>
<span class="k">assert</span> <span class="n">col</span><span class="o">.</span><span class="n">pager</span><span class="o">.</span><span class="n">page</span> <span class="o">==</span> <span class="mi">1</span>
<span class="k">assert</span> <span class="n">col</span><span class="o">.</span><span class="n">pager</span><span class="o">.</span><span class="n">rows_per_page</span> <span class="o">==</span> <span class="mi">10</span>
</code></pre></div>
<p>Because of these values you see only first 10 records from data when iterating
the collection. Let's change pager settings:</p>
<div class="highlight"><pre><span></span><code><span class="n">col</span> <span class="o">=</span> <span class="n">StaticCollection</span><span class="p">(</span>
    <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="p">{},</span>
    <span class="n">data_settings</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">)},</span>
    <span class="n">pager_settings</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;page&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;rows_per_page&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">}</span>
<span class="p">)</span>
<span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">18</span><span class="p">]</span>
</code></pre></div>
<p>Pagination details are often passed with search parameters and have huge
implact on the required data frame. Because of it, if <code>pager_settings</code> are
missing, <code>ClassicPager</code> will look for settings inside collection
parameters(second argument of the collection constructor). But in this case,
pager will use only items that has <code>&lt;collection name&gt;:</code> prefix:</p>
<div class="highlight"><pre><span></span><code><span class="n">col</span> <span class="o">=</span> <span class="n">StaticCollection</span><span class="p">(</span>
    <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="p">{</span><span class="s2">&quot;xxx:page&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;xxx:rows_per_page&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">},</span>
    <span class="n">data_settings</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">)}</span>
<span class="p">)</span>
<span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">18</span><span class="p">]</span>

<span class="n">col</span> <span class="o">=</span> <span class="n">StaticCollection</span><span class="p">(</span>
    <span class="s2">&quot;xxx&quot;</span><span class="p">,</span>
    <span class="p">{</span><span class="s2">&quot;page&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;rows_per_page&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">},</span>
    <span class="n">data_settings</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">)}</span>
<span class="p">)</span>
<span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
</code></pre></div>
<h4 id="serializer-service">Serializer service</h4>
<p>Serializer converts data into textual, binary or any other alternative
representation. For example, if you want to compute records produced by the
<code>data</code> service of the collection into pandas' DataFrame, you should probably
use serializer.</p>
<p>Serializers are main users of columns service, because it contains details
about specific data columns. And serializers often iterate data service
directly(ignoring <code>range</code> method), to serialize all available records.</p>
<p>The only required method for serializer is <code>serialize</code>. This method must return
an data from <code>data</code> service transformed into format provided by serializer. For
example, <code>JsonSerializer</code> returns string with JSON-encoded data.</p>
<p>You are not restricted by textual or binary formats. Serializer that transforms
data into pandas' DataFrame is completely valid version of the serializer.</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">NewLineSerializer</span><span class="p">(</span><span class="n">Serializer</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">attached</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>

        <span class="k">return</span> <span class="n">result</span>

<span class="n">col</span> <span class="o">=</span> <span class="n">StaticCollection</span><span class="p">(</span>
    <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="p">{},</span>
    <span class="n">serializer_factory</span><span class="o">=</span><span class="n">NewLineSerializer</span><span class="p">,</span>
    <span class="n">data_settings</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}</span>
<span class="p">)</span>
<span class="k">assert</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">col</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">serialize</span><span class="p">())</span> <span class="o">==</span> <span class="s2">&quot;1</span><span class="se">\n</span><span class="s2">2</span><span class="se">\n</span><span class="s2">3</span><span class="se">\n</span><span class="s2">&quot;</span>
</code></pre></div>
<h4 id="columns-service">Columns service</h4>
<p>This service contains additional information about separate columns of data
records. It defines following settings:</p>
<ul>
<li>names: all available column names. Used by other settings of columns service</li>
<li>hidden: columns that should not be shown by serializer. Used by serializer
  services</li>
<li>visible: columns that must be shown by serializer. Used by serializer
  services</li>
<li>sortable: columns that support sorting. Used by data services</li>
<li>filterable: columns that support filtration/facetting. Used by data services</li>
<li>searchable: columns that support search by partial match. Used by data
  services</li>
<li>labels: human readable labels for columns. Used by serializer services</li>
</ul>
<p>This service contains information used by other service, so defining additional
attributes here is completely normal. For example, some custom serializer, that
serializes data into ORC, can expect <code>orc_format</code> attribute in the <code>columns</code>
service to be available. So you can add as much additional column related
details as required into this service.</p>
<h4 id="filters-service">Filters service</h4>
<p>This service used only by HTML table serializers at the moment. It has two
configurable attributes <code>static_filters</code> and <code>static_actions</code>. <code>static_filters</code>
are used for building search form for the data table. <code>static_actions</code> are not
used, but you can put into it details about batch or record-level actions and
use these details to extend one of standard serializers. For example,
ckanext-admin-panel defines allowed actions (remove, restore, hide) for content
and creates custom templates that are referring these actions.</p>
<h3 id="core-classes-and-usage-examples">Core classes and usage examples</h3>
<p>TBA</p>
<h4 id="data">Data</h4>
<p>TBA</p>
<h4 id="staticdata">StaticData</h4>
<p>TBA</p>
<h4 id="basesadata">BaseSaData</h4>
<p>TBA</p>
<h4 id="statementsadata">StatementSaData</h4>
<p>TBA</p>
<h4 id="unionsadata">UnionSaData</h4>
<p>TBA</p>
<h4 id="modeldata">ModelData</h4>
<p>TBA</p>
<h4 id="apidata">ApiData</h4>
<p>TBA</p>
<h4 id="apisearchdata">ApiSearchData</h4>
<p>TBA</p>
<h4 id="apilistdata">ApiListData</h4>
<p>TBA</p>
<h4 id="pager">Pager</h4>
<p>TBA</p>
<h4 id="classicpager">ClassicPager</h4>
<p>TBA</p>
<h4 id="columns">Columns</h4>
<p>TBA</p>
<h4 id="filters">Filters</h4>
<p>TBA</p>
<h4 id="serializer">Serializer</h4>
<p>TBA</p>
<h4 id="csvserializer">CsvSerializer</h4>
<p>TBA</p>
<h4 id="jsonlserializer">JsonlSerializer</h4>
<p>TBA</p>
<h4 id="jsonserializer">JsonSerializer</h4>
<p>TBA</p>
<h4 id="htmlserializer">HtmlSerializer</h4>
<p>TBA</p>
<h4 id="tableserializer">TableSerializer</h4>
<p>TBA</p>
<h4 id="htmxtableserializer">HtmxTableSerializer</h4>
<p>TBA</p>
<h2 id="config-settings">Config settings</h2>
<div class="highlight"><pre><span></span><code><span class="c1"># Names of registered collections that are viewable by any visitor, including</span>
<span class="c1"># anonymous.</span>
<span class="c1"># (optional, default: )</span>
<span class="na">ckanext.collection.auth.anonymous_collections</span><span class="w"> </span><span class="o">=</span>

<span class="c1"># Names of registered collections that are viewable by any authenticated</span>
<span class="c1"># user.</span>
<span class="c1"># (optional, default: )</span>
<span class="na">ckanext.collection.auth.authenticated_collections</span><span class="w"> </span><span class="o">=</span>

<span class="c1"># Add HTMX asset to pages. Enable this option if you are using CKAN v2.10</span>
<span class="c1"># (optional, default: false)</span>
<span class="na">ckanext.collection.include_htmx_asset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">false</span>

<span class="c1"># Initialize CKAN JS modules every time HTMX fetches HTML from the server.</span>
<span class="c1"># (optional, default: false)</span>
<span class="na">ckanext.collection.htmx_init_modules</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">false</span>

<span class="c1"># Import path for serializer used by CSV export endpoint.</span>
<span class="c1"># (optional, default: ckanext.collection.utils.serialize:CsvSerializer)</span>
<span class="na">ckanext.collection.export.csv.serializer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">ckanext.collection.utils.serialize:CsvSerializer</span>

<span class="c1"># Import path for serializer used by JSON export endpoint.</span>
<span class="c1"># (optional, default: ckanext.collection.utils.serialize:JsonSerializer)</span>
<span class="na">ckanext.collection.export.json.serializer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">ckanext.collection.utils.serialize:JsonSerializer</span>

<span class="c1"># Import path for serializer used by JSONl export endpoint.</span>
<span class="c1"># (optional, default: ckanext.collection.utils.serialize:JsonlSerializer)</span>
<span class="na">ckanext.collection.export.jsonl.serializer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">ckanext.collection.utils.serialize:JsonlSerializer</span>

<span class="c1"># Import path for serializer used by `format`-export endpoint.</span>
<span class="c1"># (optional, default: )</span>
<span class="na">ckanext.collection.export.&lt;format&gt;.serializer</span><span class="w"> </span><span class="o">=</span>
</code></pre></div>
<h2 id="integrations">Integrations</h2>
<h3 id="ckanext-admin-panel"><a href="https://github.com/mutantsan/ckanext-admin-panel">ckanext-admin-panel</a></h3>
<p>To enable configuration form of ckanext-collection in the admin panel, enable
the following arbitrary schema</p>
<div class="highlight"><pre><span></span><code><span class="na">scheming.arbitrary_schemas</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="na">ckanext.collection</span><span class="o">:</span><span class="s">ap_config.yaml</span>
</code></pre></div>
<h2 id="license">License</h2>
<p><a href="https://www.gnu.org/licenses/agpl-3.0.en.html">AGPL</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href=".." class="md-footer__link md-footer__link--prev" aria-label="Previous: Overview">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Overview
              </div>
            </div>
          </a>
        
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.footer", "navigation.indexes", "navigation.top", "content.code.copy", "content.code.select", "content.code.annotate"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
    
  </body>
</html>